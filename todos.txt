
NEXT RUN: Think about changing term rates and salaries/salary increase rate
NEXT RUN: Remove bad employee flag.  Add code to save it in an alternate file for reference.  Bad employee reference list.
Remove These:
	from employee_info:
		bad_employee_flag
		TMs who are not in deskhistory (except maybe CEO, not sure if he is there)
	From deskhistory:
		Remove term flag for tms w 2999 exp date

BAD MANAGER may not be impacting turnover.  See bottom of validations.R.  Do we need to recode that? 

BAD EMPLOYEE FLAG IS NOT HAVING IMPACT ON TURNOVER, SEE IF IT IS BEING IMPLEMENTED
	fix: add bad emp flag to create_deskhistory_row function
		add multiplier for days in job, multiply by .5-.1 or something
		increase chance of turnover
IS BAD EMP FLAG IMPACTING REVIEW SCORES?

At some point communicate functions to create SQL databases	

Add specialized leader job names below.  Do this at end of 03. Look up name to job to deskid and rename that way.

LOOK AT BAD MANAGERS
REMOVE BAD TM FLAG
Remove extra employees from employeeinfo

CHECK CEO TO SEE IF HE GOT PROMOTION
WHY ARE THERE 1192 ROWS INSTEAD OF 1190? SOME DUPLICATES ACTIVE?

sql server instructions https://www.r-bloggers.com/setting-up-an-odbc-connection-with-ms-sql-server-on-windows/
harryahlas


Future blog ideas:
	show hierarchy spread SQL

NEXT RUN FIXES:
Add state/county etc on 03 - START ON 04 ## Temp analysis - THIS IS HOW TO JOIN


add rehires
Validations on Next RUN
	look at bad employee/mgr turnover
		look to see if new hires seem to happen a lot after 90 days - if so then look at 90 day new hire fill toward beginning of loop
	Look at high turnover jobs and make sure they have higher turnover
	
Next run quick changes:	
	update all graphics after upload to git
	Look for bad managers
	

Bad manager/bad employee plug SOME OF BELOW IS COMPLETE
	Solve bad manager issue - i don't think they are having higher turnover for their TMs.
			- If job is high turnover then double the turnover chances c(2,1) * c(2,1)
	5. Increase chances of poor review
		a. on 07 add poor_review_plug = 1.  If bad_employee_flag then turn to 2.
		b. on 07, around row 188 add poor_review plug to 1 and 2 ratio.
			
	
	
Look for errors - see analysis/validations.R
	1. COMPLETE - TMs terminating then rehiring - get an idea of that.  If no rehires then we should add a few
	2. Need to add a check that TMs that left company and came back did not get a review during that period
	3. MOSTLY COMPLETE - Graph review score vs tenure
		a. COMPLETE -review in 2008 < 3 then higher chance of turnover in 2009?
		b. THINK ABOUT THIS LATER - THIS SEEMS OK BUT REVIEW AGAIN, REVIEW THIS IN analysis/validations.R turnover rate for tms with 1-2 vs 3, 4,5
		c. TENURE LOOKS GOOD FOR MINIMUM REVIEW SCORES. Tenure for b above
	4. COMPLETE - Check turnover, movement, and promotions for levels 1-3, maybe deskids 1:30 or so
		a. MOVEMENT NEEDS TO BE FIXED, ADDED TASK BELOW
		b. TURNOVER SEEMS OK
		c. PROMOTION RATES SEEM OK
	5. Only 692 active TMs?  what happened? Why empty seats?  New hires?? 
		a. NEED TO UNDERSTAND WHY, WHERE THIS HAPPENS.  
			HYPOTHESIS: PEOPLE TERMINATE AND NO ONE FILLS
			HYPOTHESIS: Rowskipping is causing this on loop (i + 1)?
	6. COMPLETE - check job by states
	7. COMPLETE - Check promotions - see if people are getting promotions after a 1 or 2 review
	8. COMPLETE - Term rate is low, ~3%

COMPLETE - combine dates and variables scripts

Add ability to every once in a while hire someone up a level.  There is currently no level movement (3->2 etc)
Randomly add desk_ids after term.  and add new ones randomly. (if team has less than 12 tms say)
Have term rates fluctuate by year
Have term rates fluctuate by LOB (maybe this fits with poor performer flag)
Clean up 06 grow desk history

Add termination types:
	Voluntary Resignation: Resignation refers to a termination decided upon by an employee, who for any reason determines they want to end their employment agreement with a given organization.
		Job abandonment:Technically considered voluntary resignation, job abandonment occurs when an employee does not show up for scheduled working hours for a number of consecutive days. In most states, 3 consecutive days of unexcused absences is considered job abandonment.
	End of Temporary Employment: maybe don't worry about this...When a fixed term of temporary employment ends, the contracted temp leaves their role unless they are asked to join the organization permanently.
	Retirement: Employees retire from employment when they reach an age at which they are ready to elave the workforce permanently.
	Involuntary termination:Involuntary termination can include layoffs, closure of business, or individual termination as a result of unsatisfactory performance. (source: https://www.bambee.com/termination/)

Add movement between levels, so 4 to 3 eg

Add rehires.  When picking TMs, take a look and maybe 1/20? set rehire rate globally, take that % when picking TM.  Set min 1 year since term.

Add job level, 1-5

Add FLSA

Add recruiting source

Add higher turnover for higher report to number, maybe

need to add original hire date back in somewhere? maybe

add EER diagram to r package with function to print

instead of fuzzyjoin in salaryhistory try doing it in mysql to make it faster

increase turnover rate
increase turnover rate if they got a bad review? how to do that?
remove TMs that are not being used
remove poor performer flag from dataset
remove termination flag from deskhistory if date is 2999

allow position numbers and rollups to change, lobs etc

On next TM rerun:	
	Reduce number of legal TMs
		simply update this: data/departments.csv
update org structure
add operations
operations team A, B
virtual 



Nice to have: get employee numbers in order (not critical)
	
add dates.csv import instead of hard coded dates


update state distribution, more tms in CA etc

add TMs that left, have them rejoin later

build function for hierarchy spread?

see add laters on perf reviews
increase number of 2 review scores

lvl01_org,job_name,depth
Operations,Chief Operations Officer,1
Operations,Purchasing Manager,3
Operations,Operations Supervisor,3
Operations,Customer Care Manager,3
Operations,Customer Care Caller,4
Operations,Customer Care Associate,4
Operations,Production Engineer,4
Operations,Production Specialist,4

Compliance,Chief Compliance Officer,1
Compliance,Compliance Official,2
Compliance,Compliance Officer,4
Compliance,Compliance Officer,3
Compliance,Compliance Manager,3
Compliance,Risk Associate,4
Compliance,Auditor,4

Finance,Chief Financial Officer,1
Finance,Budget Analyst,4
Finance,Finance Manager,3
Finance,Accounting Officer,3

Sales,Sales Manager,3
Sales,Relationship Manager,4
Sales,Sales Associate,4
Sales,Salesperson,4
Sales,Financial Consultant,4

Technology,Information Architect,3
Technology,Information Security Officer,3
Technology,Information Security Specialist,4
Technology,Developer,4
Technology,Technology Specialist,4

Strategy,Chief Administration Officer,2
Strategy,Strategy Manager,3
Strategy,Strategy Consultant,4

Human Resources,Personnel Leader,1
Human Resources,Business Partner Leader,3
Human Resources,Consultant,4
Human Resources,Business Partner,4
Legal,Chief Legal Officer,1
Legal,Counsel,2
Legal,Attorney,3
Legal,Paralegal,4
